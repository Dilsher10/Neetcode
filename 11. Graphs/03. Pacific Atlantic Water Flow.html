<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacific Atlantic Water Flow</title>
</head>
<body>
    <script>
        // Method: 1
        var pacificAtlantic = function (heights) {
            if (!heights || heights.length === 0 || heights[0].length === 0) return [];

            const rows = heights.length;
            const cols = heights[0].length;
            const pacific = new Set();
            const atlantic = new Set();
            const result = [];

            const dfs = (r, c, visited, prevHeight) => {
                const key = `${r},${c}`;

                if (
                    r < 0 || c < 0 || r >= rows || c >= cols ||
                    visited.has(key) ||
                    heights[r][c] < prevHeight
                ) return;

                visited.add(key);

                dfs(r + 1, c, visited, heights[r][c]);
                dfs(r - 1, c, visited, heights[r][c]);
                dfs(r, c + 1, visited, heights[r][c]);
                dfs(r, c - 1, visited, heights[r][c]);
            };
            

            for (let c = 0; c < cols; c++) {
                dfs(0, c, pacific, heights[0][c]); // top edge (Pacific)
                dfs(rows - 1, c, atlantic, heights[rows - 1][c]); // bottom edge (Atlantic)
            }

            for (let r = 0; r < rows; r++) {
                dfs(r, 0, pacific, heights[r][0]); // left edge (Pacific)
                dfs(r, cols - 1, atlantic, heights[r][cols - 1]); // right edge (Atlantic)
            }

            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    const key = `${r},${c}`;
                    if (pacific.has(key) && atlantic.has(key)) {
                        result.push([r, c]);
                    }
                }
            }

            return result;
        };


        

        // Method: 2
        class Solution {

            pacificAtlantic(heights) {
                const ROWS = heights.length;
                const COLS = heights[0].length;

                // Use Set to track visited positions as "r,c" strings
                const pac = new Set();
                const atl = new Set();

                // DFS function using sets
                const dfs = (r, c, visited, prevHeight) => {
                    const key = `${r},${c}`;

                    // Boundary and validity checks
                    if (
                        r < 0 || r >= ROWS ||
                        c < 0 || c >= COLS ||
                        visited.has(key) ||
                        heights[r][c] < prevHeight
                    ) {
                        return;
                    }

                    // Mark this cell as visited
                    visited.add(key); 

                    // Explore all directions
                    dfs(r + 1, c, visited, heights[r][c]);
                    dfs(r - 1, c, visited, heights[r][c]);
                    dfs(r, c + 1, visited, heights[r][c]);
                    dfs(r, c - 1, visited, heights[r][c]);
                };

                // Start DFS from Pacific Ocean borders
                for (let c = 0; c < COLS; c++) {
                    dfs(0, c, pac, heights[0][c]);             // Top row
                    dfs(ROWS - 1, c, atl, heights[ROWS - 1][c]); // Bottom row
                }

                for (let r = 0; r < ROWS; r++) {
                    dfs(r, 0, pac, heights[r][0]);             // Left column
                    dfs(r, COLS - 1, atl, heights[r][COLS - 1]); // Right column
                }

                // Build result from overlapping visited cells
                const res = [];
                for (let r = 0; r < ROWS; r++) {
                    for (let c = 0; c < COLS; c++) {
                        const key = `${r},${c}`;
                        if (pac.has(key) && atl.has(key)) {
                            res.push([r, c]);
                        }
                    }
                }

                return res;
            }
        }

        const heights = [
            [4, 2, 7, 3, 4],
            [7, 4, 6, 4, 7],
            [6, 3, 5, 3, 6]
        ];
        const solution = new Solution();
        const result = solution.pacificAtlantic(heights);
        console.log(result);
    </script>
</body>
</html>
