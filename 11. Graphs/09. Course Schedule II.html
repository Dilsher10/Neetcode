<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Schedule II</title>
</head>

<body>
    <script>
        function findOrder(numCourses, prerequisites) {
            const preMap = new Map();
            let cycle = new Set();
            let visited = new Set();
            let res = [];

            for (let i = 0; i < numCourses; i++) {
                preMap.set(i, []);
            }


            for (const [crs, pre] of prerequisites) {
                preMap.get(crs).push(pre);
            }


            const dfs = (crs) => {
                if (cycle.has(crs)) {
                    return false;
                }

                if (visited.has(crs)) {
                    return true;
                }

                cycle.add(crs);

                for (const nei of preMap.get(crs)) {
                    if (!dfs(nei)) {
                        return false;
                    }
                }

                cycle.delete(crs);
                visited.add(crs);
                res.push(crs);
                return true;
            }


            for (let i = 0; i < numCourses; i++) {
                if (!dfs(i)) {
                    return [];
                }
            }

            return res;;
        }

        numCourses = 3, prerequisites = [[1, 0]];
        console.log(findOrder(numCourses, prerequisites));
    </script>
</body>

</html>