<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotting Oranges</title>
</head>

<body>
    <script>
        function orangesRotting(grid) {
            const rows = grid.length;
            const cols = grid[0].length;
            let q = [];
            let fresh = 0;
            let time = 0;

            // Step 1: Count fresh oranges and enqueue all rotten oranges
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    if (grid[r][c] === 2) {
                        q.push([r, c]);
                    } else if (grid[r][c] === 1) {
                        fresh++;
                    }
                }
            }

            // Helper to rot a fresh orange and enqueue it
            const bfs = (r, c) => {
                if (
                    r < 0 || c < 0 ||
                    r >= rows || c >= cols ||
                    grid[r][c] !== 1 // Only rot fresh oranges
                ) {
                    return;
                }

                grid[r][c] = 2; // Rot it
                fresh--;
                q.push([r, c]); // Add to same queue for next round
            };


            // BFS loop
            while (q.length > 0 && fresh > 0) {
                const len = q.length;

                // Process current level
                for (let i = 0; i < len; i++) {
                    const [r, c] = q.shift();

                    bfs(r + 1, c);
                    bfs(r - 1, c);
                    bfs(r, c + 1);
                    bfs(r, c - 1);
                }

                // After processing this level, increment time
                time++;
            }

            return fresh === 0 ? time : -1;
        }

        grid = [[1, 1, 0], [0, 1, 1], [0, 1, 2]];
        console.log(orangesRotting(grid));
    </script>
</body>

</html>