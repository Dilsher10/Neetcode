<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Scheduler</title>
</head>

<body>
    <script>
        function leastInterval(tasks, n) {
            const count = {};
            for (const task of tasks) {
                count[task] = (count[task] || 0) + 1;
            }

            const maxPQ = new MaxPriorityQueue();
            for (const val of Object.values(count)) {
                maxPQ.enqueue(val);
            }

            let time = 0;
            const q = [];

            while (!maxPQ.isEmpty() || q.length > 0) {
                time++;

                if (!maxPQ.isEmpty()) {
                    let cnt = maxPQ.dequeue() - 1;
                    if (cnt > 0) q.push([cnt, time + n]);
                }

                if (q.length > 0 && q[0][1] === time) {
                    maxPQ.enqueue(q.shift()[0]);
                }
            }

            return time;
        }
    </script>
</body>

</html>